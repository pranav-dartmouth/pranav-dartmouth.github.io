<!DOCTYPE html>
<html>
  <head>
      <title>Food Retail in Louisville!</title>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>'
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.heat/0.2.0/leaflet-heat.js"></script>

      
      <style>
          body {
            background-color: #E2DFCB;
	font-family: Arial, sans-serif;
          }

	       .navigation {
				background-color: #A6674C;
				top: 0;
				left: 0;
				margin: 0;
				padding: 0;
				position: fixed;
				vertical-align: top;
				width: 100%;
				display: flex;
				justify-content: space-between;
				z-index: 3;
			}
				
			.navigationleftside {
				list-style-type: none;
			}

			.navigationrightside {
				list-style-type: none;
				display: flex;
			}

	      figcaption {
		      font-size: xx-small;
		      text-align: center;
	      }

			nav a {
				color: white;
				text-decoration: none;
				padding: 10px;
			}

			nav a:hover {
				font-weight: bold;

			}

			nav a:visited {
				color: white;
				text-decoration: none;
				font-weight: normal;
			}

			nav a:active {
				font-weight: bold;
			}

          h1 {
            text-align: center;
          }
          #map1 {
              height: 400px;
              margin-left: 20px;
		margin-right: 20px;
		  z-index: 1;
            
          }

	      #map2 {
              height: 400px;
              margin-left: 20px;
		      margin-right: 20px;
		      z-index: 1;
            
          }

	       #map3 {
              height: 400px;
              margin-left: 20px;
		      margin-right: 20px;
		      z-index: 1;
            
          }

	       #map4 {
              height: 400px;
              margin-left: 20px;
		      margin-right: 20px;
		      z-index: 1;
            
          }

	     
	      

	      .buttontext {
		margin-left: auto;
		margin-right: auto;
		text-align: center;
		display: flex;
		justify-content: center;
	}

	      button {
		background-color: white; 
		border: solid 2px;
		font-weight: bold;
		font-size: 15px;
		padding-top: 10px;
		padding-bottom: 10px;
		padding-right: 10px;
		padding-left: 10px;
		margin-bottom: 5px;
		margin-right: auto;
		margin-left: auto;
		border-radius: 15px;
		text-align: center;
		text-decoration: none;
		width: 200px;
			}

	      #toggleFastFood {
		margin-top: 5px;
		border-color: orange;
		color: orange;
	      }

	       #toggleFastFoodHeatmap {
		margin-top: 5px;
		border-color: orange;
		color: orange;
	   }

	         #toggleFastFoodCensusTracts {
		margin-top: 5px;
		border-color: orange;
		color: orange;
	   }
	      

          #toggleGroceryStores {
		margin-top: 5px;
		border-color: #54278f;
		color: #54278f;
          }

	   #toggleGroceryStoresHeatmap {
		margin-top: 5px;
		border-color: #54278f;
		color: #54278f;
	   }
		#toggleGroceryStoreCensusTracts {
		margin-top: 5px;
		border-color: #54278f;
		color: #54278f;
	   }
	      

          #toggleFarmersMarkets {
		margin-top: 5px;
		border-color: #ffeb00;
		color: #ffeb00;
          }

	  #toggleFarmersMarketsHeatmap {
		margin-top: 5px;
		border-color: #ffeb00;
		color: #ffeb00;
          }

	      #toggleFarmerMarketCensusTracts {
		margin-top: 5px;
		border-color: #ffeb00;
		color: #ffeb00;
	   }

	      #toggleFoodBanks {
		margin-top: 5px;
		border-color: #6cbdbd;
		color: #6cbdbd;
          }

	  #toggleFoodBanksHeatmap {
		margin-top: 5px;
		border-color: #6cbdbd;
		color: #6cbdbd;
          }

	      #toggleFoodBanksCensusTracts {
		margin-top: 5px;
		border-color: #6cbdbd;
		color: #6cbdbd;
	   }

	      .section, #firstsection {
		      padding-top: 30px;
		      margin-bottom: 30px;
		      
	      }

	      .section {
		      background-color: white;
		      margin-right: auto;
		      margin-left: auto;
		      width: 50%;
		      border-radius: 20px;
		      padding-bottom: 30px;
		      border-radius: 20px;
	      }

	      

	      h1, h3 {
		      text-align: center;
	      }

	      .part {
		      
    box-sizing: border-box;
    padding-left: 20px;
    padding-right: 20px;
	      }

	      #fastslowfoodpic {
		margin-right: auto;
		      margin-left: auto;
		      display: block;

	      }

	      /* Source of code: Leaflet Chloropleth Demo */
	      .info {
    padding: 6px 8px;
    
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}

	       .info1 {
    padding: 6px 8px;
    
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info1 h4 {
    margin: 0 0 5px;
    color: #777;
}

	      .info2 {
    padding: 6px 8px;
    
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info2 h4 {
    margin: 0 0 5px;
    color: #777;
}

	      .info3 {
    padding: 6px 8px;
    
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info3 h4 {
    margin: 0 0 5px;
    color: #777;
}


	      .legend {
		      line-height: 18px;
		      color: #555;

	      }

	      .legend i {
		      width: 18px;
		      height: 18px;
		      float: left;
		      margin-right: 8px;
		      opacity: 0.7;
	      }
        
      </style>
      
  </head>
  <body>
	   <nav>
			<div class="navigation">
			<div>
				<ul class="navigationleftside">
					<li><a href="louisvillefoodsystemfinal.html">Louisville's Food System</a></li>
				</ul>
			</div>
			<div>
				<ul class="navigationrightside">
					<li><a href="overview.html" class="navlinks">Overview</a></li>
					<li><a href="production.html" class="navlinks">Production</a></li>
					<li><a href="manufacturing.html" class="navlinks">Manufacturing</a></li>
					<li><a href="retail.html" class="navlinks">Retail</a></li>
					<li><a href="reform.html" class="navlinks">Reform</a></li>
				</ul>
			</div>
			</div>
		</nav>
	<div id="firstsection">
      <h1>Food Retail in Louisville</h1>
	</div>
	<div class="section">
	<h3>Bifurcated Retail Landscape?</h3>
	<p class="part">Retail marks one of the last and most important parts of the food supply chain, having the responsibility of getting manufactured and processed food products directly to consumers. There are an estimated 3,960 food retailers operating in the Louisville area. Yet, as with all other prior components of the food supply chain, retail is not distributed equally throughout the city. This is especially true when considering what type of food is being sold by retailers to different communities in different parts of the city: fast, processed, and (generally) unhealthy food or “slow” food that tends to be healthier, fresher, and locally sourced. Research in other cities, such as in <a href="https://www.researchgate.net/profile/Susan-Chen-4/publication/228425696_Obesity_fast_food_and_grocery_stores_evidence_from_geo-referenced_micro_data/links/0fcfd509947cf072da000000/Obesity-fast-food-and-grocery-stores-evidence-from-geo-referenced-micro-data.pdf" target="_blank">Indianapolis</a> and <a href="https://www.sciencedirect.com/science/article/pii/S0749379704001394?casa_token=qgkNSkilxegAAAAA:VnTxT8JHnORYP7gOPXfe7gJ67J6XSLb1-bwb1Ozo8042JGMlV7_tcdUpUJe7f7c_wslyNGbX5JQ" target="_blank">New Orleans</a>, has implied a bifurcated retail landscape (particularly regard the overprevalence of fast food establishments in poorer, minority neighborhoods) as one manifestation of urban food system inequality. </p>
	<figure>
		<img src="fastslowfood.jpg" alt="Picture of bifurcated fast and slow food retail landscape" id="fastslowfoodpic">
		<figcaption>Image from: <a href="http://www.originalitaly.it/blog/by-originalitaly/25341/fast-food-vs-slow-food/" target="_blank">Original Italy</a></figcaption>
	</figure>
	</div>
	  <div class="section">
		  <h3>"Fast Food" Retailers</h3>
		  <p class="part">Based on the presence of bifurcated retail landscapes in other cities, we would expect fast food establishments to be more present in poorer, majority-minority parts of the city.<br></p>
			<p class="part" style="text-align:center;font-weight:bold;">Does this spatial pattern of inequality in fast food store placement hold up?</p>
		<div id="mapcontainer">
      <div id="map1"></div>
     <div class="buttontext"><button id="toggleFastFood" hidden>Fast Food Establishments</button></div><br>
    <div class="buttontext"><button id="toggleFastFoodHeatmap" hidden>Fast Food Heatmap</button></div><br>
	    <div class="buttontext"><button id="toggleFastFoodCensusTracts" hidden>Census Tracts</button></div><br>
	
      
  </div>
		  <p class="part">As the map shows, there tends to be a concentration of fast food establishments in the middle of the city. The census tracts with the densest presence of fast food are Census Tracts 119.06 (which has a 55% Black/Hispanic population) and 109.1 (which has a 26% Black/Hispanic population). Notably there aren't a significant number of fast food establishments in the westernmost parts of the city, which have by far the poorest census tracts. This seems to belie the aforementioned pattern in other cities of an overprevalence of fast food establishments in the poorest parts of the city. Nonetheless, a correlation does exist between fast food establishments and census tracts that are majority-minority and (slightly) poorer than average. Such a configuration of fast food retailers in Louisville has <a href="https://academic.oup.com/nutritionreviews/article/71/5/310/2460221" target="_blank">public health implications</a> in terms of unequally distributing the burden of health ailments (obesity, diabetes, cardiological conditions) often caused by the overconsumption of fast food. And it contrasts with the healthy consumptive options offered by “slower” food retailers like grocery stores and farmers’ markets. </p>
	  </div>
	  
		<div class="section">
			<h3>"Slow Food" Retailers: Farmers Markets</h3>
			 <p class="part">The "slow food" movement <a href="https://www.slowfood.com/" target="_blank">began in 1989</a> as an alternative to the growing globalization and presumed “unhealthiness” of the food system as exemplified by fast food. The movement advocates for farmers’ markets, community supported agriculture, community gardens, and other “localizations” of the food system so as to decrease the distance between consumers and producers but also offer healthier produce to those who need it. The main manifestation of “slow food” on the retail side is undeniably <a href="https://earth911.com/home-garden/enjoying-the-slow-food-movement/">farmers’ markets</a>, which have proliferated in Louisville in the past few decades. </p>
			<p class="part" style="text-align:center;font-weight:bold;">Is it true that in Louisville farmers' markers are unequally dispersed throughout the city></p>
			<div id="map2"></div>	
    <div class="buttontext"><button id="toggleFarmersMarkets" hidden>Farmers Markets</button></div>
    <div class="buttontext"><button id="toggleFarmersMarketsHeatmap" hidden>Farmers Markets Heatmap</button></div>
	  <div class="buttontext"><button id="toggleFarmerMarketCensusTracts" hidden>Farmers Markets Census Tracts</button></div>
    <p class="part">According to the map, the farmers' markets that exist in Louisville seem to be relatively dispersed throughout the city, with Census Tracts 59.02, 14, and 127.01 having at least one farmers market in the vicinity of a highly low-income and majority-minority population. While this in no way indicates that the underprivileged urbanites in these communities are accessing or purchasing from farmers markets at the same rate as affluent residents of Louisville (the <a href="https://food52.com/blog/16907-are-farmers-markets-really-as-expensive-as-everyone-says" target="_blank">arguably high costs</a> of farmers markets often preclude them from doing so), the significant presence of farmers markets in various parts of Louisville may be attributable to <a href="https://louisville.edu/sustainability/news/food-stamps-worth-double-at-gray-street-farmers-market" target="_blank">a SNAP-related program</a> that allows food insecure Louisvillians to procure from farmers markets at discounted rates.</p>
		 
	  
		</div>

	  <div class="section">
		  <h3>"Slower Food" Retailers: Grocery Stores</h3>
		  <p class="part">Another indicator of a bifurcated retail landscape is grocery stores, which have often been contrasted with fast food establishments as offering healthier and locally sourced ingredients to their consumers. The dearth of grocery stores in marginalized urban neighborhoods has been documented in other cities such as <a href="https://link.springer.com/article/10.1007/s40615-023-01669-4" target="_blank">Cleveland</a>.<br></p>
		  <p class="part" style="text-align:center;font-weight:bold;">Is the general inequality in access to grocery stores also the case in Louisville?</p>
		  <div id="map3"></div>
     <div class="buttontext"><button id="toggleGroceryStores" hidden>Grocery Stores</button></div>
    <div class="buttontext"><button id="toggleGroceryStoresHeatmap" hidden>Grocery Stores Heatmap</button></div>
	  <div class="buttontext"><button id="toggleGroceryStoreCensusTracts" hidden>Census Tracts</button></div>
		  <p class="part">Similar to the case of farmers’ markets, grocery stores as a form of (quasi-)”slow food” retail doesn’t seem to show any particular spatial patterning with regard to indicators of race or class. Grocery stores are present in both the western and eastern ends of the city, with certain grocery store-containing census tracts such as Census Tract 110.6, Census Tract 119.06, Census Tract 51, and Census Tract 65 having high minority populations and somewhat high poverty rates. Still, a number of the poorest Louisville census tracts in the westernmost part of the city don’t have a single grocery store in them, indicating some level of inequality in access to these stores. (Even though many census tracts in Louisville’s east also do not technically possess a grocery store in their vicinity, their residents seem to have <a href="https://spectrumnews1.com/ky/louisville/news/2023/04/26/change-today-change-tomorrow-food-insecurity">relatively higher vehicle ownership rates and mobility</a> that definitely enable them to reach grocery stores efficiently. But, even assuming that residents of Louisville’s poorest and majority-minority census tracts are successfully accessing grocery stores, there’s no guarantee that these stores are selling affordably healthy produce. Indeed, many grocery stores (particularly in Louisville), while they are certainly “slower” culinarily than fast food, sell many unhealthy, processed, and non-locally-sourced foodstuffs that belie their stereotypical characterization as the opposite of fast food. For that reason, we can’t rule out that grocery stores’ spatial patterning in Louisville may be indicative of some food system inequalities affecting the most marginalized communities in the city. </p>
		    
	  </div>

	  <div class="section">
			<h3>Retail Redistribution</h3>
			<p class="part">An often neglected component of the retail side of any local food system is <a href="https://www.feedingamerica.org/our-work/food-bank-network" target="_blank">the redistribution system</a> by which post-retail food is collected and given to those in need through institutions like food banks and food pantries. Although they are not typically considered a manifestation of the “slow food” retail sector in the same way as farmers’ markets and grocery stores, food banks and pantries are integral to ensuring that the food-insecure receive at least some measure of healthy produce for free and are not made to solely rely on proximate fast food establishments.<br></p>
			<p class="part" style="text-align:center;font-weight:bold;">How are these food banks spatialized in Louisville?</p>	
		  <div id="map4"></div>	
    <div class="buttontext"><button id="toggleFoodBanks" hidden>Food Banks</button></div>
    <div class="buttontext"><button id="toggleFoodBanksHeatmap" hidden>Food Banks Heatmap</button></div>
	  <div class="buttontext"><button id="toggleFoodBanksCensusTracts" hidden>Food Banks Census Tracts</button></div>
    
		  <p class="part">Based on the fact that food banks are overwhelmingly concentrated in census tracts with high poverty rates and high minority populations, they can be assumed to be feeding the Louisvillians most in need. So, food redistribution can be considered one aspect of the retail side of Louisville’s food system that is trying to mitigate inequality in some way.</p>
	  </div>
    


      <script>
        
          var fastfoodLayer;
        var fastfoodVisible = true;
        var fastfoodheatmapLayer;
          var fastfoodheatmapVisible = true;
	      var fastfoodcensustractLayer;
	      var fastfoodcensustractVisible = true;
	        var grocerystoresLayer;
        var grocerystoresVisible = true;
         var grocerystoresheatmapLayer;
	        var grocerystoresheatmapLayerVisible = true;
	      var grocerystorecensustractLayer;
	      var grocerystorecensustractVisible = true;
          var farmersmarketsLayer;
        var farmersmarketsVisible = true;
         var farmersmarketsheatmapLayer;
	        var farmersmarketsheatmapVisible = true;
	        var farmermarketcensustractLayer;
	        var farmermarketcensustractVisible = true;
	      var foodbanksLayer;
        var foodbanksVisible = true;
         var foodbanksheatmapLayer;
	        var foodbanksheatmapVisible = true;
	        var foodbankscensustractsLayer;
	        var foodbankscensustractsVisible = true;
	      
        
	  var OpenStreetMap1 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '© <a href="www.openstreetmap.com/copyright">OpenStreetMap</a>'});
	        var OpenStreetMap2 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '© <a href="www.openstreetmap.com/copyright">OpenStreetMap</a>'});
	        var OpenStreetMap3 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '© <a href="www.openstreetmap.com/copyright">OpenStreetMap</a>'});
	        var OpenStreetMap4 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '© <a href="www.openstreetmap.com/copyright">OpenStreetMap</a>'});
          var map1 = L.map('map1', {
		  center: [38.2527, -85.7585],
		  zoom: 10,
		  layers: [OpenStreetMap1]
	  });

         var map2 = L.map('map2', {
		  center: [38.2527, -85.7585],
		  zoom: 10,
		  layers: [OpenStreetMap2]
	  });

	    var map3 = L.map('map3', {
		  center: [38.2527, -85.7585],
		  zoom: 10,
		  layers: [OpenStreetMap3]
	  });

         var map4 = L.map('map4', {
		  center: [38.2527, -85.7585],
		  zoom: 10,
		  layers: [OpenStreetMap4]
	  });  

         

           var CartoDB_DarkMatter1 = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
});

          

          var USGS_USImageryTopo1 = L.tileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}', {
	        maxZoom: 20,
	        attribution: 'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'
          });

	
	      var Esri_WorldGrayCanvas1 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
	maxZoom: 16
});

	      var Esri_WorldTerrain1 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
	maxZoom: 13
});

	      var Esri_WorldShadedRelief1 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
	maxZoom: 13
});

          var baseMaps1 = {"OSM" : OpenStreetMap1,
			  "CTBD" : CartoDB_DarkMatter1,
                          "USGS" : USGS_USImageryTopo1,
			  "EWGC": Esri_WorldGrayCanvas1,
			  "EWT": Esri_WorldTerrain1,
			  "EWSR": Esri_WorldShadedRelief1
                         };

	       var CartoDB_DarkMatter2 = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
});

          

          var USGS_USImageryTopo2 = L.tileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}', {
	        maxZoom: 20,
	        attribution: 'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'
          });

	
	      var Esri_WorldGrayCanvas2 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
	maxZoom: 16
});

	      var Esri_WorldTerrain2 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
	maxZoom: 13
});

	      var Esri_WorldShadedRelief2 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
	maxZoom: 13
});

          var baseMaps2 = {"OSM" : OpenStreetMap2,
			  "CTBD" : CartoDB_DarkMatter2,
                          "USGS" : USGS_USImageryTopo2,
			  "EWGC": Esri_WorldGrayCanvas2,
			  "EWT": Esri_WorldTerrain2,
			  "EWSR": Esri_WorldShadedRelief2
                         };

	        var CartoDB_DarkMatter3 = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
});

          

          var USGS_USImageryTopo3 = L.tileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}', {
	        maxZoom: 20,
	        attribution: 'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'
          });

	
	      var Esri_WorldGrayCanvas3 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
	maxZoom: 16
});

	      var Esri_WorldTerrain3 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
	maxZoom: 13
});

	      var Esri_WorldShadedRelief3 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
	maxZoom: 13
});

          var baseMaps3 = {"OSM" : OpenStreetMap3,
			  "CTBD" : CartoDB_DarkMatter3,
                          "USGS" : USGS_USImageryTopo3,
			  "EWGC": Esri_WorldGrayCanvas3,
			  "EWT": Esri_WorldTerrain3,
			  "EWSR": Esri_WorldShadedRelief3
                         };

	         var CartoDB_DarkMatter4 = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
});

          

          var USGS_USImageryTopo4 = L.tileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}', {
	        maxZoom: 20,
	        attribution: 'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'
          });

	
	      var Esri_WorldGrayCanvas4 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
	maxZoom: 16
});

	      var Esri_WorldTerrain4 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
	maxZoom: 13
});

	      var Esri_WorldShadedRelief4 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
	maxZoom: 13
});

          var baseMaps4 = {"OSM" : OpenStreetMap4,
			  "CTBD" : CartoDB_DarkMatter4,
                          "USGS" : USGS_USImageryTopo4,
			  "EWGC": Esri_WorldGrayCanvas4,
			  "EWT": Esri_WorldTerrain4,
			  "EWSR": Esri_WorldShadedRelief4
                         };
	      

          L.control.layers(baseMaps1).addTo(map1);

        L.control.layers(baseMaps2).addTo(map2);

	        L.control.layers(baseMaps3).addTo(map3);

        L.control.layers(baseMaps4).addTo(map4);

	      function getColorfastfood(d) {
		 return     d > 9 ? "#a63603" : 
		       		d > 8 ? "#a63603" : 
			      d > 7 ? "#a63603" :
			      d > 6 ? "#a63603" :
			      d > 5 ? "#a63603" :
			       d > 4 ? "#e6550d" :
			       d > 3 ? "#fd8d3c" :
			       d > 2 ? "#fdae6b" :
				 d > 1 ? "#fdd0a2" :
			 d > 0 ? "#feedde" :
			 
			      "#ffffff";
	      

	      }

	       var legend1 = L.control({position: 'bottomright'});

	      legend1.onAdd = function (map1) {

		      var div = L.DomUtil.create('div', 'info legend'),
			      grades = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
			      labels = [];

		      for (var i = 0; i < grades.length; i++) {
			      div.innerHTML +=
			'<i style="background:' + getColorfastfood(grades[i]) + '"></i> ' +
				      (grades[i] ? grades[i] + '<br>' : '<br>');
		      }

		      return div;

	      };
legend1.addTo(map1);
	      
	  function fastfoodSymbology(feature) {
                var count = feature.properties.NUMPOINTS;
		var polygoncolor;
		var polygonopacity;

		if (count >= 0) {
			polygoncolor = "#FFFFFF";
			polygonopacity = 0;

		}

		if (count >= 1) {
			polygoncolor = "#feedde";
			polygonopacity = 1;

		}

		if (count >= 2) {
			polygoncolor = "#fdd0a2";
			polygonopacity = 1;
		}

		if (count >= 3) {
			polygoncolor = "#fdae6b";
			polygonopacity = 1;
		}
		  if (count >= 4) {
			polygoncolor = "#fd8d3c";
			polygonopacity = 1;
		}
		   if (count >= 5) {
			polygoncolor = "#e6550d";
			polygonopacity = 1;
		}
		   if (count >= 6) {
			polygoncolor = "#a63603";
			polygonopacity = 1;
		}

		return {
		 fillColor: polygoncolor,
		color: polygoncolor,
		fillOpacity: polygonopacity,
		opacity: polygonopacity
			
	       };	       
	      }

	      function getColorfarmersmarkets(d) {
		 return     d > 1 ? "#ffeb00" : 
		       		d > 0 ? "#fefd98" : 
			     
			      "#ffffff";
	      

	      }

	       var legend2 = L.control({position: 'bottomright'});

	      legend2.onAdd = function (map2) {

		      var div = L.DomUtil.create('div', 'info legend'),
			      grades = [0, 1, 2],
			      labels = [];

		      for (var i = 0; i < grades.length; i++) {
			      div.innerHTML +=
			'<i style="background:' + getColorfarmersmarkets(grades[i]) + '"></i> ' +
				      (grades[i] ? grades[i] + '<br>' : '<br>');
		      }

		      return div;

	      };
legend2.addTo(map2);

		    function farmermarketSymbology(feature) {
                var count = feature.properties.NUMPOINTS;
		var polygoncolor;
		var polygonopacity;

		if (count >= 0) {
			polygoncolor = "#FFFFFF";
			polygonopacity = 0;

		}

		if (count >= 1) {
			polygoncolor = "#fefd98";
			polygonopacity = 1;

		}

		if (count >= 2) {
			polygoncolor = "#ffeb00";
			polygonopacity = 1;
		}

		return {
		 fillColor: polygoncolor,
		color: polygoncolor,
		fillOpacity: polygonopacity,
		opacity: polygonopacity
			
	       };	       
	      }

	      function getColorgrocerystores(d) {
		 return     d > 4 ? "#54278f" : 
		       		d > 3 ? "#756bb1" : 
			 d > 2 ? "#9e9ac8" : 
		       		d > 1 ? "#cbc9e2" : 
			 d > 0 ? "#f2f0f7" :
			     
			      "#ffffff";
	      

	      }

	       var legend3 = L.control({position: 'bottomright'});

	      legend3.onAdd = function (map3) {

		      var div = L.DomUtil.create('div', 'info legend'),
			      grades = [0, 1, 2, 3, 4, 5],
			      labels = [];

		      for (var i = 0; i < grades.length; i++) {
			      div.innerHTML +=
			'<i style="background:' + getColorgrocerystores(grades[i]) + '"></i> ' +
				      (grades[i] ? grades[i] + '<br>' : '<br>');
		      }

		      return div;

	      };
legend3.addTo(map3);

	       function grocerystoreSymbology(feature) {
                var count = feature.properties.NUMPOINTS;
		var polygoncolor;
		var polygonopacity;

		if (count >= 0) {
			polygoncolor = "#FFFFFF";
			polygonopacity = 0;

		}
		  if (count >= 1) {
			polygoncolor = "#f2f0f7";
			polygonopacity = 1;

		}     

		if (count >= 2) {
			polygoncolor = "#cbc9e2";
			polygonopacity = 1;

		}

		if (count >= 3) {
			polygoncolor = "#9e9ac8";
			polygonopacity = 1;
		}

		      if (count >= 4) {
			polygoncolor = "#756bb1";
			polygonopacity = 1;
		}
		       if (count >= 5) {
			polygoncolor = "#54278f";
			polygonopacity = 1;
		}

		

		return {
		 fillColor: polygoncolor,
		color: polygoncolor,
		fillOpacity: polygonopacity,
		opacity: polygonopacity
			
	       };	       
	      }

	       function getColorfoodbanks(d) {
		 return     d > 2 ? "#6cbdbd" : 
		       		d > 1 ? "#c5ebe8" : 
			 d > 0 ? "#dff5f2" : 
		       	
			      "#ffffff";
	      

	      }

	       var legend4 = L.control({position: 'bottomright'});

	      legend4.onAdd = function (map4) {

		      var div = L.DomUtil.create('div', 'info legend'),
			      grades = [0, 1, 2, 3],
			      labels = [];

		      for (var i = 0; i < grades.length; i++) {
			      div.innerHTML +=
			'<i style="background:' + getColorfoodbanks(grades[i]) + '"></i> ' +
				      (grades[i] ? grades[i] + '<br>' : '<br>');
		      }

		      return div;

	      };
legend4.addTo(map4);
	      

	       function foodbankSymbology(feature) {
                var count = feature.properties.NUMPOINTS;
		var polygoncolor;
		var polygonopacity;

		if (count >= 0) {
			polygoncolor = "#FFFFFF";
			polygonopacity = 0;

		}
		  if (count >= 1) {
			polygoncolor = "#dff5f2";
			polygonopacity = 1;

		}     

		if (count >= 2) {
			polygoncolor = "#c5ebe8";
			polygonopacity = 1;

		}

		if (count >= 3) {
			polygoncolor = "#6cbdbd";
			polygonopacity = 1;
		}

		

		return {
		 fillColor: polygoncolor,
		color: polygoncolor,
		fillOpacity: polygonopacity,
		opacity: polygonopacity
			
	       };	       
	      }

  var info = L.control({position: "topleft"});

info.onAdd = function (map1) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

info.update = function (props) {
    this._div.innerHTML = '<h3>Number of Fast Food Places</h3>' +  (props ?
        '<b>' + props.NAME1 + '</b><br />' + Math.round(props.NUMPOINTS) + ' Fast Food Establishments<br />' + Math.round(props.pctpov) + '% poor<br />' + Math.round(parseFloat(props.pctblack) + parseFloat(props.pcthispani)) + '% Black/Hispanic<br />' + Math.round(props.pctSNAP) + '% on SNAP'
					: 'Hover over a census tract');
};

	      function highlightFeaturefastfood(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
info.update(layer.feature.properties);
}
	     
	      
	      function resetHighlightfastfood(e) {
    fastfoodcensustractLayer.resetStyle(e.target);
		         info.update();

		      
}

	      

	      function zoomToFeaturefastfood(e) {
    map.fitBounds(e.target.getBounds());
}

	      function onEachFeaturefastfood(feature, layer) {
    layer.on({
        mouseover: highlightFeaturefastfood,
        mouseout: resetHighlightfastfood,
        click: zoomToFeaturefastfood
    });

		      
}

	      var info1 = L.control({position: "topleft"});

info1.onAdd = function (map2) {
    this._div = L.DomUtil.create('div', 'info1'); // create a div with a class "info"
    this.update();
    return this._div;
};

info1.update = function (props) {
    this._div.innerHTML = '<h3>Number of Farmers Markets</h3>' +  (props ?
        '<b>' + props.NAME1 + '</b><br />' + Math.round(props.NUMPOINTS) + ' farmers markets<br />' + Math.round(props.pctpov) + '% poor<br />' + Math.round(parseFloat(props.pctblack) + parseFloat(props.pcthispani)) + '% Black/Hispanic<br />' + Math.round(props.pctSNAP) + '% on SNAP'
					: 'Hover over a census tract');
};

	      function highlightFeaturefarmermarket(e) {
    var layer1 = e.target;

    layer1.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer1.bringToFront();
    }
info1.update(layer1.feature.properties);
}
	     
	      
	      function resetHighlightfarmermarket(e) {
    farmermarketcensustractLayer.resetStyle(e.target);
		         info1.update();

		      
}

	      

	      function zoomToFeaturefarmermarket(e) {
    map.fitBounds(e.target.getBounds());
}

	      function onEachFeaturefarmermarket(feature, layer) {
    layer.on({
        mouseover: highlightFeaturefarmermarket,
        mouseout: resetHighlightfarmermarket,
        click: zoomToFeaturefarmermarket
    });

		      
}

	      var info2 = L.control({position: "topleft"});

info2.onAdd = function (map3) {
    this._div = L.DomUtil.create('div', 'info2'); // create a div with a class "info"
    this.update();
    return this._div;
};

info2.update = function (props) {
    this._div.innerHTML = '<h3>Number of Grocery Stores</h3>' +  (props ?
        '<b>' + props.NAME1 + '</b><br />' + Math.round(props.NUMPOINTS) + ' grocery stores<br />' + Math.round(props.pctpov) + '% poor<br />' + Math.round(parseFloat(props.pctblack) + parseFloat(props.pcthispani)) + '% Black/Hispanic<br />' + Math.round(props.pctSNAP) + '% on SNAP'
					: 'Hover over a census tract');
};

	      function highlightFeaturegrocerystore(e) {
    var layer2 = e.target;

    layer2.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer2.bringToFront();
    }
info2.update(layer2.feature.properties);
}
	     
	      
	      function resetHighlightgrocerystore(e) {
    grocerystorecensustractLayer.resetStyle(e.target);
		         info2.update();

		      
}

	      

	      function zoomToFeaturegrocerystore(e) {
    map.fitBounds(e.target.getBounds());
}

	      function onEachFeaturegrocerystore(feature, layer) {
    layer.on({
        mouseover: highlightFeaturegrocerystore,
        mouseout: resetHighlightgrocerystore,
        click: zoomToFeaturegrocerystore
    });

		      
}


	      var info3 = L.control({position: "topleft"});

info3.onAdd = function (map4) {
    this._div = L.DomUtil.create('div', 'info3'); // create a div with a class "info"
    this.update();
    return this._div;
};

info3.update = function (props) {
    this._div.innerHTML = '<h3>Number of Food Banks</h3>' +  (props ?
        '<b>' + props.NAME1 + '</b><br />' + Math.round(props.NUMPOINTS) + ' food banks<br />' + Math.round(props.pctpov) + '% poor<br />' + Math.round(parseFloat(props.pctblack) + parseFloat(props.pcthispani)) + '% Black/Hispanic<br />' + Math.round(props.pctSNAP) + '% on SNAP'
					: 'Hover over a census tract');
};

	      function highlightFeaturefoodbank(e) {
    var layer3 = e.target;

    layer3.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer3.bringToFront();
    }
info3.update(layer3.feature.properties);
}
	     
	      
	      function resetHighlightfoodbank(e) {
    foodbankscensustractsLayer.resetStyle(e.target);
		         info3.update();

		      
}

	      

	      function zoomToFeaturefoodbank(e) {
    map.fitBounds(e.target.getBounds());
}

	      function onEachFeaturefoodbank(feature, layer) {
    layer.on({
        mouseover: highlightFeaturefoodbank,
        mouseout: resetHighlightfoodbank,
        click: zoomToFeaturefoodbank
    });

		      
}


         

          var response1 = $.ajax({
            url: "fastfood.geojson",
            dataType: "json",
            success: console.log("Fast food loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	      var fastfoodcsv = Array();

          $.when(response1).done(function() {
   
            var fastfoodLayer = L.geoJson(response1.responseJSON, {
              
                     onEachFeature: function(feature, layer) {
                            layer.bindPopup("<b>Fast Food: " + 
                            feature.properties.Name + "</b>"); 
			     fastfoodcsv.push([feature.geometry.coordinates[1], feature.geometry.coordinates[0], 1]);

                       },

                      pointToLayer: function (feature, latlng) { 
                          return L.circleMarker(latlng, {
                            
                         
                          weight: 1,
                          opacity: 1,
                          fillOpacity: 1,
				  radius: 3,
                            fillColor: "orange",
                            color: "orange"
              });
              },
            }).addTo(map1);

		     console.log(fastfoodcsv);

      fastfoodheatmapLayer = L.heatLayer(fastfoodcsv, {
        radius: 25
      , gradient: {0.0: '#e6550d', 0.5: '#e6550d', 1.0: '#e6550d'})).addTo(map1);


            $("#toggleFastFood").show();

           $("#toggleFastFood").click( function() {
              if (fastfoodVisible) {
                    fastfoodVisible = false;
                    fastfoodLayer.removeFrom(map1);
              }

              else {
                  fastfoodVisible = true;
                  fastfoodLayer.addTo(map1);
              }
            });

            $("#toggleFastFoodHeatmap").show();

           $("#toggleFastFoodHeatmap").click( function() {
              if (fastfoodheatmapVisible) {
                   fastfoodheatmapVisible = false;
                    fastfoodheatmapLayer.removeFrom(map1);
              }

              else {
                 fastfoodheatmapVisible = true;
                  fastfoodheatmapLayer.addTo(map1);
              }
            });

          });



	 var response2 = $.ajax({
            url: "fastfoodcensustracts.geojson",
            dataType: "json",
            success: console.log("Fast food census tracts loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	     $.when(response2).done(function() {
   
            fastfoodcensustractLayer = L.geoJson(response2.responseJSON, {

		    style: fastfoodSymbology,
              
                      onEachFeature: onEachFeaturefastfood
            }).addTo(map1);

info.addTo(map1);

		  


            $("#toggleFastFoodCensusTracts").show();

           $("#toggleFastFoodCensusTracts").click( function() {
              if (fastfoodcensustractVisible) {
                    fastfoodcensustractVisible = false;
                    fastfoodcensustractLayer.removeFrom(map1);
              }

              else {
                  fastfoodcensustractVisible = true;
                  fastfoodcensustractLayer.addTo(map1);
              }
            });

           
           

          }); 

	      

        var response3 = $.ajax({
            url: "farmersmarkets.geojson",
            dataType: "json",
            success: console.log("Farmers markets loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	      var farmersmarketscsv = Array();

          $.when(response3).done(function() {
   
            var farmersmarketsLayer = L.geoJson(response3.responseJSON, {
              
                     onEachFeature: function(feature, layer) {
                            layer.bindPopup("<b>Farmers Market: " + 
                            feature.properties.Name + "</b>"); 
			     farmersmarketscsv.push([feature.geometry.coordinates[1], feature.geometry.coordinates[0], 1]);

                       },

                      pointToLayer: function (feature, latlng) { 
                          return L.circleMarker(latlng, {
                            
                         
                          weight: 1,
                          opacity: 1,
                          fillOpacity: 1,
				  radius: 3,
                            fillColor: "yellow",
                            color: "yellow"
              });
              },
            }).addTo(map2);

		     console.log(farmersmarketscsv);

     farmersmarketsheatmapLayer = L.heatLayer(farmersmarketscsv, {
        radius: 25, gradient: {0.0: '#ffeb00', 0.5: '#ffeb00', 1: '#ffeb00'}).addTo(map2);


            $("#toggleFarmersMarkets").show();

           $("#toggleFarmersMarkets").click( function() {
              if (farmersmarketsVisible) {
                    farmersmarketsVisible = false;
                    farmersmarketsLayer.removeFrom(map2);
              }

              else {
                  farmersmarketsVisible = true;
                  farmersmarketsLayer.addTo(map2);
              }
            });

            $("#toggleFarmersMarketsHeatmap").show();

           $("#toggleFarmersMarketsHeatmap").click( function() {
              if (farmersmarketsheatmapVisible) {
                   farmersmarketsheatmapVisible = false;
                   farmersmarketsheatmapLayer.removeFrom(map2);
              }

              else {
                 farmersmarketsheatmapVisible = true;
                  farmersmarketsheatmapLayer.addTo(map2);
              }
            });

          });

	       var response4 = $.ajax({
            url: "farmersmarketsincensustracts.geojson",
            dataType: "json",
            success: console.log("Farmers markets census tracts loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	     $.when(response4).done(function() {
   
            farmermarketcensustractLayer = L.geoJson(response4.responseJSON, {

		    style: farmermarketSymbology,
              
                      onEachFeature: onEachFeaturefarmermarket
            }).addTo(map2);

info1.addTo(map2);

		  


            $("#toggleFarmerMarketCensusTracts").show();

           $("#toggleFarmerMarketCensusTracts").click( function() {
              if (farmermarketcensustractVisible) {
                    farmermarketcensustractVisible = false;
                    farmermarketcensustractLayer.removeFrom(map2);
              }

              else {
                  farmermarketcensustractVisible = true;
                  farmermarketcensustractLayer.addTo(map2);
              }
            });

           
           

          }); 
	       var response5 = $.ajax({
            url: "grocerystores.geojson",
            dataType: "json",
            success: console.log("Grocery stores loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	      var grocerystorescsv = Array();

          $.when(response5).done(function() {
   
            var grocerystoresLayer = L.geoJson(response5.responseJSON, {
              
                     onEachFeature: function(feature, layer) {
                            layer.bindPopup("<b>Grocery Store: " + 
                            feature.properties.Name + "</b>"); 
			     grocerystorescsv.push([feature.geometry.coordinates[1], feature.geometry.coordinates[0], 1]);

                       },

                      pointToLayer: function (feature, latlng) { 
                          return L.circleMarker(latlng, {
                            
                         
                          weight: 1,
                          opacity: 1,
                          fillOpacity: 1,
				  radius: 3,
                            fillColor: "#756bb1",
                            color: "#756bb1"
              });
              },
            }).addTo(map3);

		     console.log(grocerystorescsv);

    grocerystoresheatmapLayer = L.heatLayer(grocerystorescsv, {
        radius: 25
      }).addTo(map3);


            $("#toggleGroceryStores").show();

           $("#toggleGroceryStores").click( function() {
              if (grocerystoresVisible) {
                    grocerystoresVisible = false;
                    grocerystoresLayer.removeFrom(map3);
              }

              else {
                  grocerystoresVisible = true;
                  grocerystoresLayer.addTo(map3);
              }
            });

            $("#toggleGroceryStoresHeatmap").show();

           $("#toggleGroceryStoresHeatmap").click( function() {
              if (grocerystoresheatmapLayerVisible) {
                   grocerystoresheatmapLayerVisible = false;
                   grocerystoresheatmapLayer.removeFrom(map3);
              }

              else {
                 grocerystoresheatmapLayerVisible = true;
                  grocerystoresheatmapLayer.addTo(map3);
              }
            });

          });

	     var response6 = $.ajax({
            url: "grocerystorecensustracts.geojson",
            dataType: "json",
            success: console.log("Grocery store census tracts loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	     $.when(response6).done(function() {
   
            grocerystorecensustractLayer = L.geoJson(response6.responseJSON, {

		    style: grocerystoreSymbology,
              
                      onEachFeature: onEachFeaturegrocerystore
            }).addTo(map3);

info2.addTo(map3);

		  


            $("#toggleGroceryStoreCensusTracts").show();

           $("#toggleGroceryStoreCensusTracts").click( function() {
              if (grocerystorecensustractVisible) {
                    grocerystorecensustractVisible = false;
                    grocerystorecensustractLayer.removeFrom(map3);
              }

              else {
                  grocerystorecensustractVisible = true;
                  grocerystorecensustractLayer.addTo(map3);
              }
            });

           
           

          });  

	      var response7 = $.ajax({
            url: "foodbanks.geojson",
            dataType: "json",
            success: console.log("Food banks loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	      var foodbankscsv = Array();

          $.when(response7).done(function() {
   
            var foodbanksLayer = L.geoJson(response7.responseJSON, {
              
                     onEachFeature: function(feature, layer) {
                            layer.bindPopup("<b>Food Bank: " + 
                            feature.properties.FoodBank + "</b>"); 
			     foodbankscsv.push([feature.geometry.coordinates[1], feature.geometry.coordinates[0], 1]);

                       },

                      pointToLayer: function (feature, latlng) { 
                          return L.circleMarker(latlng, {
                            
                         
                          weight: 1,
                          opacity: 1,
                          fillOpacity: 1,
				  radius: 3,
                            fillColor: "orange",
                            color: "orange"
              });
              },
            }).addTo(map4);

		     

      foodbanksheatmapLayer = L.heatLayer(foodbankscsv, {
        radius: 25
      }).addTo(map4);


            $("#toggleFoodBanks").show();

           $("#toggleFoodBanks").click( function() {
              if (foodbanksVisible) {
                    foodbanksVisible = false;
                    foodbanksLayer.removeFrom(map4);
              }

              else {
                  foodbanksVisible = true;
                  foodbanksLayer.addTo(map4);
              }
            });

            $("#toggleFoodBanksHeatmap").show();

           $("#toggleFoodBanksHeatmap").click( function() {
              if (foodbanksheatmapVisible) {
                   foodbanksheatmapVisible = false;
                    foodbanksheatmapLayer.removeFrom(map4);
              }

              else {
                 foodbanksheatmapVisible = true;
                  foodbanksheatmapLayer.addTo(map4);
              }
            });

          });


	      var response8 = $.ajax({
            url: "foodbanksincensustracts.geojson",
            dataType: "json",
            success: console.log("Food Banks in Census Tracts loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	     $.when(response8).done(function() {
   
            foodbankscensustractsLayer = L.geoJson(response8.responseJSON, {

		    style: foodbankSymbology,
              
                      onEachFeature: onEachFeaturefoodbank
            }).addTo(map4);

info3.addTo(map4);
		  


            $("#toggleFoodBanksCensusTracts").show();

           $("#toggleFoodBanksCensusTracts").click( function() {
              if (foodbankscensustractsVisible) {
                    foodbankscensustractsVisible = false;
                    foodbankscensustractsLayer.removeFrom(map4);
              }

              else {
                  foodbankscensustractsVisible = true;
                  foodbankscensustractsLayer.addTo(map4);
              }
            });

           
           

          });  
              
      </script>
  </body>
</html>
