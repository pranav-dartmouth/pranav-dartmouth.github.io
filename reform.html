<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" width="width-device-width">
      <title>Reforming Louisville's Food System</title>
	    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>'
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      
    </head>
    <style>

	    body {
		    background-color: #E2DFCB;
		    font-family: Arial, sans-serif;
	    }
	    
        .navigation {
				background-color: #A6674C;
				top: 0;
				left: 0;
				margin: 0;
				padding: 0;
				position: fixed;
				vertical-align: top;
				width: 100%;
				display: flex;
				justify-content: space-between;
				z-index: 3;
			}
				
			.navigationleftside {
				list-style-type: none;
			}

			.navigationrightside {
				list-style-type: none;
				display: flex;
			}

			nav a {
				color: white;
				text-decoration: none;
				padding: 10px;
			}

			nav a:hover {
				font-weight: bold;

			}

			nav a:visited {
				color: white;
				text-decoration: none;
				font-weight: normal;
			}

			nav a:active {
				font-weight: bold;
			}

			

	  

	    .section, #firstsection {
		      padding-top: 30px;
		      margin-bottom: 30px;
		      
	      }

	      .section {
		      background-color: white;
		      margin-right: auto;
		      margin-left: auto;
		      width: 50%;
		      border-radius: 20px;
		      padding-bottom: 30px;
		      border-radius: 20px;
	      }

	      

	      h1, h3 {
		      text-align: center;
	      }

	      .part {
		      
    box-sizing: border-box;
    padding-left: 20px;
    padding-right: 20px;
	      }

	    .buttontext {
		margin-left: auto;
		margin-right: auto;
		text-align: center;
		display: flex;
		justify-content: center;
	}

	    #map1 {
		    height: 400px;
		    margin-right: 20px;
		    margin-left: 20px;
	    }

	      button {
		background-color: white; 
		border: solid 2px;
		font-weight: bold;
		font-size: 15px;
		padding-top: 10px;
		padding-bottom: 10px;
		padding-right: 10px;
		padding-left: 10px;
		margin-bottom: 5px;
		margin-right: auto;
		margin-left: auto;
		border-radius: 15px;
		text-align: center;
		text-decoration: none;
		width: 200px;
			}

	      #toggleOrganizations {
		margin-top: 5px;
		border-color: brown;
		color: brown;
	      }
        
    </style>
<body>

    <nav>
			<div class="navigation">
			<div>
				<ul class="navigationleftside">
					<li><a href="louisvillefoodsystemfinal.html">Louisville's Food System</a></li>
				</ul>
			</div>
			<div>
				<ul class="navigationrightside">
					<li><a href="overview.html" class="navlinks">Overview</a></li>
					<li><a href="production.html" class="navlinks">Production</a></li>
					<li><a href="manufacturing.html" class="navlinks">Manufacturing</a></li>
					<li><a href="retail.html" class="navlinks">Retail</a></li>
					<li><a href="reform.html" class="navlinks">Reform</a></li>
				</ul>
			</div>
			</div>
		</nav>
  
	   <div id="firstsection">
 		 <h1>Reform of Louisville's Food System</h1>
	   </div>
	<div class="section">
		<h3>Policymaking</h3>
		<p class="part">There have been numerous policy changes at the municipal, state, and national levels to make the food system more equitable and just in Louisville. These include: the government-subsidized development of a recent Food Truck Clinic, the passage of an ordinance that broadens permissions for market gardens and community gardens throughout vacant lots, etc. (Ghabour, 2023; Courier Journal, 2020).</p>
		<div id="map"></div>

	</div>

	<div class="section">
		<h3>Advocacy and Organizing</h3>
		<p class="part">There are a number of nonprofits in the Louisville area who work to address the inequalities in the city's food system at various points. Click the points in the map below to check them out.</p>
		<div id="map1"></div>
		<div class="buttontext"><button id="toggleOrganizations">Organizations</button></div>

	</div>



	
  
	   
   </div>
<script>
	var organizationsLayer;
	var organizationsVisible = true;
	var OpenStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: 'Â© <a href="www.openstreetmap.com/copyright">OpenStreetMap</a>'});
          var map1 = L.map('map1', {
		  center: [38.2527, -85.7585],
		  zoom: 10,
		  layers: [OpenStreetMap]
	  });

	
         

           var CartoDB_DarkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
});

          

          var USGS_USImageryTopo = L.tileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}', {
	        maxZoom: 20,
	        attribution: 'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'
          });

	
	      var Esri_WorldGrayCanvas = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
	maxZoom: 16
});

	      var Esri_WorldTerrain = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
	maxZoom: 13
});

	      var Esri_WorldShadedRelief = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri',
	maxZoom: 13
});

          var baseMaps = {"OSM" : OpenStreetMap,
			  "CTBD" : CartoDB_DarkMatter,
                          "USGS" : USGS_USImageryTopo,
			  "EWGC": Esri_WorldGrayCanvas,
			  "EWT": Esri_WorldTerrain,
			  "EWSR": Esri_WorldShadedRelief
                         };

          L.control.layers(baseMaps).addTo(map1);

	

	 var response = $.ajax({
            url: "organizations.geojson",
            dataType: "json",
            success: console.log("Organizations loaded."),
            error: function(xhr) {
              alert(xhr.statusText);
            }
          });

	    

	      

          $.when(response).done(function() {
   
            var organizationsLayer = L.geoJson(response.responseJSON, {
              
                     onEachFeature: function(feature, layer) {
                            layer.bindPopup('Nonprofit: ' + 
                            feature.properties.Organization + '<br>' + 'Find out more information at: ' + feature.properties.Link + '<br>'); 

			     /* '<img src="' + feature.properties.Image + '" alt="No image available" style="width:100px;height:100px;display:block;margin-right:auto;margin-left:auto;">' */

                       },

                      pointToLayer: function (feature, latlng) { 
                          return L.circleMarker(latlng, {
                            
                         
                          weight: 1,
                          opacity: 1,
			radius: 3,
                          fillOpacity: 1,
                            fillColor: "brown",
                            color: "brown"
              });
              },
            }).addTo(map1);

             $("#toggleOrganizations").show();

           $("#toggleOrganizations").click( function() {
              if (organizationsVisible) {
                    organizationsVisible = false;
                    organizationsLayer.removeFrom(map1);
              }

              else {
                  organizationsVisible = true;
                   organizationsLayer.addTo(map1);
              }
            });

          });

	

	
</script>
</body>
</html>
